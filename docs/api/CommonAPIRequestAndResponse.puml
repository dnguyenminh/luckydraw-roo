@startuml CommonAPIRequestAndResponse

' Common API Request and Response Models

namespace vn.com.fecredit.app.service.dto {
    
    enum ObjectType {
        Event
        Region
        Province
        Reward
        GoldenHour
        SpinHistory
        AuditLog
        Statistics
        User
        Role
        Permission
        Configuration
        BlacklistedToken
        EventLocation
        Participant
        ParticipantEvent
    }
    
    enum FetchStatus {
        SUCCESS
        NO_DATA
        ERROR
        INVALID_REQUEST
        ACCESS_DENIED
    }
    
    enum SortType {
        ASCENDING
        DESCENDING
        NONE
    }
    
    enum FilterType {
        EQUALS
        NOT_EQUALS
        LESS_THAN
        LESS_THAN_OR_EQUALS
        GREATER_THAN
        GREATER_THAN_OR_EQUALS
        BETWEEN
        IN
        NOT_IN
    }
    
    class TableFetchRequest {
        ObjectType objectType
        String entityName
        int page
        int size
        List<SortRequest> sorts
        List<FilterRequest> filters
        Map<String, String> search
    }
    
    class TableFetchResponse {
        TableFetchRequest originalRequest
        StatisticsInfo statistics
    }
    
    class TableInfo {
        FetchStatus status
        String message
        Integer totalPage
        Integer currentPage
        Integer pageSize
        Long totalElements
        String tableName
        Map<String, ColumnInfo> fieldNameMap
        List<TableRow> rows
        Map<String, DataObject> relatedLinkedObjects
    }
    
    class TableRow {
        Map<String, Object> data
    }
    
    class TabTableRow {
        List<String> relatedTables
        boolean hasRelatedTables()
        TabTableRow addRelatedTable(String tableName)
    }
    
    class FilterRequest {
        String field
        FilterType filterType
        String minValue
        String maxValue
    }
    
    class SortRequest {
        String field
        SortType sortType
    }
    
    class ColumnInfo {
        String fieldName
        String fieldType
        SortType sortType
    }
    
    class StatisticsInfo {
        Map<String, List<ChartInfo>> charts
    }
    
    class ChartInfo {
        String chartName
        String chartType
        Map<String, List<String>> chartData
    }
    
    class DataObject {
        ObjectType objectType
        Map<String, ColumnInfo> fieldNameMap
        String description
        Map<String, Object> data
        Integer order
    }
    
    TableFetchResponse --|> TableInfo
    TabTableRow --|> TableRow
    TableFetchResponse --> TableFetchRequest
    TableFetchResponse --> StatisticsInfo
    TableFetchRequest --> ObjectType
    TableInfo --> FetchStatus
    TableFetchRequest --> SortRequest
    TableFetchRequest --> FilterRequest
    SortRequest --> SortType
    FilterRequest --> FilterType
    StatisticsInfo --> ChartInfo
}

@enduml
